<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real time chat</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="./static/home.css">
</head>


<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io({
        auth: {
            token: localStorage.getItem('token')
        }
    });

</script>

<body class="bg-blue-50 flex flex-col items-center justify-center min-h-screen">
    <div class="main bg-white p-8 rounded w-full flex">
        <div class="mini-shadow w-1/4 bg-gray-100 p-4 rounded mr-4">
            <div class="mt-4">
                <input type="text" name="query" class="w-full px-3 py-2 border rounded focus:outline-none focus:border-blue-500" placeholder="Search user with ID">
            </div>

            <ul class="users space-y-2 mt-3">
                
            </ul>
        </div>
        <!-- Основной контент чата -->
        <div class="w-3/4">
            <div class="chat-container">
                <div class="inner-chat-container mini-shadow h-64 overflow-y-auto p-4 border rounded">
          
                    <div class="mb-4 chat">
                        
                    </div>
                   
                </div>
                <div class="inner-chat-container-2 mini-shadow border rounded">
          
                    <div class="mb-4 chat">
                        
                    </div>
                   
                </div>
            </div>

        </div>
    </div>
</body>


<script>

   $.ajax({
        url: "/users",
        method: "get",
        headers: {
            'Authorization': `Bearer ${localStorage.token}`
        },
        success: res => {
            if(res.users){
                for(i of res.users){
                    $('.users').append(`
                        <div class="get-chat">
                            <a href="/chat/${i._id}" class="user-btn user">${i.username}</a>
                        </div>
                    `)
                }
            }
        }
   })
</script>
</html>